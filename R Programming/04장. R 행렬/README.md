# 04. R 행렬

# 1. 행렬 만들기

- `matrix()`
    
    ```r
    n <- 1:10 
    # 1 2 3 4 5 6 7 8 9 10
    
    m <- matrix(n, nrow=2, ncol=5)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    3    5    7    9
    # [2,]    2    4    6    8   10
    m <- matrix(n, nrow=2)
    
    matrix(n, nrow=2, ncol=5, byrow=T)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    2    3    4    5
    # [2,]    6    7    8    9   10
    ```
    
- 행렬과 `dim` 속성
    
    ```r
    attributes(n)
    # NULL
    
    attributes(m)
    # $dim
    # 2 5
    
    m <- matrix(n, nrow=5, ncol=2)
    attributes(m)
    # $dim
    # 5 2
    ```
    
- 벡터 출력 vs 행렬 출력
    - 벡터 : 데이터를 모든 줄을 차례대로 채우면서 출력, 줄이 바뀔 떄마다 각 줄의 첫 요소가 벡터의 몇 번째 데이터인지 출력
    - 행렬 : 행과 열의 개수에 맞추어 출력, 데이터의 위치 출력
- `matrix()` 에서 벡터 재사용
    
    ```r
    m <- matrix(1:9, nrow=3, ncol=3)
    #      [,1] [,2] [,3]
    # [1,]    1    4    7
    # [2,]    2    5    8
    # [3,]    3    6    9
    
    m <- matrix(1, nrow=3, ncol=3)
    #      [,1] [,2] [,3]
    # [1,]    1    1    1
    # [2,]    1    1    1
    # [3,]    1    1    1
    
    m <- matrix(1:3, nrow=3, ncol=3)
    #      [,1] [,2] [,3]
    # [1,]    1    1    1
    # [2,]    2    2    2
    # [3,]    3    3    3
    
    m <- matrix(11:30, nrow=3, ncol=3)
    # Warning in matrix(11:30, nrow = 3, ncol = 3): 데이터의 길이[20]가 행의 개수[3]의 배수가 되지 않습니다
    #      [,1] [,2] [,3]
    # [1,]   11   14   17
    # [2,]   12   15   18
    # [3,]   13   16   19
    ```
    

# 2. 벡터를 결합하여 행렬 만들기

- `cbind(), rbind()`
    
    ```r
    cbind(1:5, 10:6)
    #      [,1] [,2]
    # [1,]    1   10
    # [2,]    2    9
    # [3,]    3    8
    # [4,]    4    7
    # [5,]    5    6
    
    rbind(1:5, 10:6, 11:15)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    2    3    4    5
    # [2,]   10    9    8    7    6
    # [3,]   11   12   13   14   15
    ```
    
- 벡터+벡터, 벡터+행렬, 행렬+행렬 결합
    
    ```r
    A <- matrix(1:9, nrow=3, ncol=3)
    cbind(A, 10:12)
    #      [,1] [,2] [,3] [,4]
    # [1,]    1    4    7   10
    # [2,]    2    5    8   11
    # [3,]    3    6    9   12
    
    rbind(10:12, A)
    #      [,1] [,2] [,3]
    # [1,]   10   11   12
    # [2,]    1    4    7
    # [3,]    2    5    8
    # [4,]    3    6    9
    
    cbind(A, A)
    #      [,1] [,2] [,3] [,4] [,5] [,6]
    # [1,]    1    4    7    1    4    7
    # [2,]    2    5    8    2    5    8
    # [3,]    3    6    9    3    6    9
    
    t <- rbind(A, 10:12)
    #      [,1] [,2] [,3]
    # [1,]    1    4    7
    # [2,]    2    5    8
    # [3,]    3    6    9
    # [4,]   10   11   12
    
    rbind(A, t)
    #      [,1] [,2] [,3]
    # [1,]    1    4    7
    # [2,]    2    5    8
    # [3,]    3    6    9
    # [4,]    1    4    7
    # [5,]    2    5    8
    # [6,]    3    6    9
    # [7,]   10   11   12
    
    cbind(A, t)
    # Error in cbind(A, t): 각각의 행렬이 가진 행의 개수는 반드시 서로 일치해야 합니다 (인자 2를 참고하세요)
    ```
    
- 행렬+행렬 연결은 행 또는 열의 수가 같아야 함
    
    ```r
    A <- cbind(1:6, 7:9)
    #      [,1] [,2]
    # [1,]    1    7
    # [2,]    2    8
    # [3,]    3    9
    # [4,]    4    7
    # [5,]    5    8
    # [6,]    6    9
    
    cbind(A, 10:11)
    # [,1] [,2] [,3]
    # [1,]    1    7   10
    # [2,]    2    8   11
    # [3,]    3    9   10
    # [4,]    4    7   11
    # [5,]    5    8   10
    # [6,]    6    9   11
    
    rbind(1, 1:5)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    1    1    1    1
    # [2,]    1    2    3    4    5
    ```
    

# 3. 행렬의 필터링

- 자연수 인덱스 벡터
    
    ```r
    z <- matrix(1:25, nrow=5, ncol=5)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    6   11   16   21
    # [2,]    2    7   12   17   22
    # [3,]    3    8   13   18   23
    # [4,]    4    9   14   19   24
    # [5,]    5   10   15   20   25
    
    z[1,1]
    # 1
    
    z[1:3, 1]
    # 1 2 3
    
    z[c(3, 5), c(2, 4)]
    #      [,1] [,2]
    # [1,]    8   18
    # [2,]   10   20
    
    z[,2]
    # 6 7 8 9 10
    
    z[,c(3, 5)]
    #      [,1] [,2]
    # [1,]   11   21
    # [2,]   12   22
    # [3,]   13   23
    # [4,]   14   24
    # [5,]   15   25
    ```
    
- 음의 정수 인덱스 벡터
    
    ```r
    z[,-2]
    #      [,1] [,2] [,3] [,4]
    # [1,]    1   11   16   21
    # [2,]    2   12   17   22
    # [3,]    3   13   18   23
    # [4,]    4   14   19   24
    # [5,]    5   15   20   25
    
    z[,-c(2, 4)]
    #      [,1] [,2] [,3]
    # [1,]    1   11   21
    # [2,]    2   12   22
    # [3,]    3   13   23
    # [4,]    4   14   24
    # [5,]    5   15   25
    ```
    
- 인덱스 벡터로 행과 열 재배치 하기
    
    ```r
    z[5:1, ]
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    5   10   15   20   25
    # [2,]    4    9   14   19   24
    # [3,]    3    8   13   18   23
    # [4,]    2    7   12   17   22
    # [5,]    1    6   11   16   21
    
    z[ , c(3:5, 1:2)]
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]   11   16   21    1    6
    # [2,]   12   17   22    2    7
    # [3,]   13   18   23    3    8
    # [4,]   14   19   24    4    9
    # [5,]   15   20   25    5   10
    
    a <- matrix(sample(1:16), nrow=4, ncol=4)
    #      [,1] [,2] [,3] [,4]
    # [1,]    5    8    2   12
    # [2,]   15    1    3    4
    # [3,]    6   11   10   13
    # [4,]   14    9    7   16
    
    order(a[,1])
    # 1 3 4 2
    
    a[order(a[,1]), ]
    #      [,1] [,2] [,3] [,4]
    # [1,]    5    8    2   12
    # [2,]    6   11   10   13
    # [3,]   14    9    7   16
    # [4,]   15    1    3    4
    ```
    
- 논리 인덱스 벡터
    
    ```r
    height <- c(180, 172, 167, 175, 182)
    weight <- c(72, 78, 58, 64, 68)
    year <- c(1, 3, 2, 4, 2)
    A <- cbind(height, weight, year)
    A[, c(F, T, T)]
    #      weight year
    # [1,]     72    1
    # [2,]     78    3
    # [3,]     58    2
    # [4,]     64    4
    # [5,]     68    2
    
    A[, c(T, F, T)]
    #      height year
    # [1,]    180    1
    # [2,]    172    3
    # [3,]    167    2
    # [4,]    175    4
    # [5,]    182    2
    
    A[ A[,2] < 70, ]
    #      height weight year
    # [1,]    167     58    2
    # [2,]    175     64    4
    # [3,]    182     68    2
    ```
    
- 행과 열 이름 부여하기 : `rownames(), colnames()`
    
    ```r
    colnames(A)
    # "height" "weight" "year"
    
    rownames(A)
    # NULL
    
    rownames(A) <- paste("student", 1:5, sep="")
    #          height weight year
    # student1    180     72    1
    # student2    172     78    3
    # student3    167     58    2
    # student4    175     64    4
    # student5    182     68    2
    
    A[, "year"]
    # student1 student2 student3 student4 student5 
    #        1        3        2        4        2
    
    A["student2", 2]
    # 78
    ```
    
- 벡터로서 필터링 하기
    
    ```r
    z
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    6   11   16   21
    # [2,]    2    7   12   17   22
    # [3,]    3    8   13   18   23
    # [4,]    4    9   14   19   24
    # [5,]    5   10   15   20   25
    
    z[10]
    # 10
    
    z[z>15]
    # 16 17 18 19 20 21 22 23 24 25
    ```
