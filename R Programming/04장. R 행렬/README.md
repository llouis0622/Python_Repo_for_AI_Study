# 04. R 행렬

# 1. 행렬 만들기

- `matrix()`
    
    ```r
    n <- 1:10 
    # 1 2 3 4 5 6 7 8 9 10
    
    m <- matrix(n, nrow=2, ncol=5)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    3    5    7    9
    # [2,]    2    4    6    8   10
    m <- matrix(n, nrow=2)
    
    matrix(n, nrow=2, ncol=5, byrow=T)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    2    3    4    5
    # [2,]    6    7    8    9   10
    ```
    
- 행렬과 `dim` 속성
    
    ```r
    attributes(n)
    # NULL
    
    attributes(m)
    # $dim
    # 2 5
    
    m <- matrix(n, nrow=5, ncol=2)
    attributes(m)
    # $dim
    # 5 2
    ```
    
- 벡터 출력 vs 행렬 출력
    - 벡터 : 데이터를 모든 줄을 차례대로 채우면서 출력, 줄이 바뀔 떄마다 각 줄의 첫 요소가 벡터의 몇 번째 데이터인지 출력
    - 행렬 : 행과 열의 개수에 맞추어 출력, 데이터의 위치 출력
- `matrix()` 에서 벡터 재사용
    
    ```r
    m <- matrix(1:9, nrow=3, ncol=3)
    #      [,1] [,2] [,3]
    # [1,]    1    4    7
    # [2,]    2    5    8
    # [3,]    3    6    9
    
    m <- matrix(1, nrow=3, ncol=3)
    #      [,1] [,2] [,3]
    # [1,]    1    1    1
    # [2,]    1    1    1
    # [3,]    1    1    1
    
    m <- matrix(1:3, nrow=3, ncol=3)
    #      [,1] [,2] [,3]
    # [1,]    1    1    1
    # [2,]    2    2    2
    # [3,]    3    3    3
    
    m <- matrix(11:30, nrow=3, ncol=3)
    # Warning in matrix(11:30, nrow = 3, ncol = 3): 데이터의 길이[20]가 행의 개수[3]의 배수가 되지 않습니다
    #      [,1] [,2] [,3]
    # [1,]   11   14   17
    # [2,]   12   15   18
    # [3,]   13   16   19
    ```
    

# 2. 벡터를 결합하여 행렬 만들기

- `cbind(), rbind()`
    
    ```r
    cbind(1:5, 10:6)
    #      [,1] [,2]
    # [1,]    1   10
    # [2,]    2    9
    # [3,]    3    8
    # [4,]    4    7
    # [5,]    5    6
    
    rbind(1:5, 10:6, 11:15)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    2    3    4    5
    # [2,]   10    9    8    7    6
    # [3,]   11   12   13   14   15
    ```
    
- 벡터+벡터, 벡터+행렬, 행렬+행렬 결합
    
    ```r
    A <- matrix(1:9, nrow=3, ncol=3)
    cbind(A, 10:12)
    #      [,1] [,2] [,3] [,4]
    # [1,]    1    4    7   10
    # [2,]    2    5    8   11
    # [3,]    3    6    9   12
    
    rbind(10:12, A)
    #      [,1] [,2] [,3]
    # [1,]   10   11   12
    # [2,]    1    4    7
    # [3,]    2    5    8
    # [4,]    3    6    9
    
    cbind(A, A)
    #      [,1] [,2] [,3] [,4] [,5] [,6]
    # [1,]    1    4    7    1    4    7
    # [2,]    2    5    8    2    5    8
    # [3,]    3    6    9    3    6    9
    
    t <- rbind(A, 10:12)
    #      [,1] [,2] [,3]
    # [1,]    1    4    7
    # [2,]    2    5    8
    # [3,]    3    6    9
    # [4,]   10   11   12
    
    rbind(A, t)
    #      [,1] [,2] [,3]
    # [1,]    1    4    7
    # [2,]    2    5    8
    # [3,]    3    6    9
    # [4,]    1    4    7
    # [5,]    2    5    8
    # [6,]    3    6    9
    # [7,]   10   11   12
    
    cbind(A, t)
    # Error in cbind(A, t): 각각의 행렬이 가진 행의 개수는 반드시 서로 일치해야 합니다 (인자 2를 참고하세요)
    ```
    
- 행렬+행렬 연결은 행 또는 열의 수가 같아야 함
    
    ```r
    A <- cbind(1:6, 7:9)
    #      [,1] [,2]
    # [1,]    1    7
    # [2,]    2    8
    # [3,]    3    9
    # [4,]    4    7
    # [5,]    5    8
    # [6,]    6    9
    
    cbind(A, 10:11)
    # [,1] [,2] [,3]
    # [1,]    1    7   10
    # [2,]    2    8   11
    # [3,]    3    9   10
    # [4,]    4    7   11
    # [5,]    5    8   10
    # [6,]    6    9   11
    
    rbind(1, 1:5)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    1    1    1    1
    # [2,]    1    2    3    4    5
    ```
    

# 3. 행렬의 필터링

- 자연수 인덱스 벡터
    
    ```r
    z <- matrix(1:25, nrow=5, ncol=5)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    6   11   16   21
    # [2,]    2    7   12   17   22
    # [3,]    3    8   13   18   23
    # [4,]    4    9   14   19   24
    # [5,]    5   10   15   20   25
    
    z[1,1]
    # 1
    
    z[1:3, 1]
    # 1 2 3
    
    z[c(3, 5), c(2, 4)]
    #      [,1] [,2]
    # [1,]    8   18
    # [2,]   10   20
    
    z[,2]
    # 6 7 8 9 10
    
    z[,c(3, 5)]
    #      [,1] [,2]
    # [1,]   11   21
    # [2,]   12   22
    # [3,]   13   23
    # [4,]   14   24
    # [5,]   15   25
    ```
    
- 음의 정수 인덱스 벡터
    
    ```r
    z[,-2]
    #      [,1] [,2] [,3] [,4]
    # [1,]    1   11   16   21
    # [2,]    2   12   17   22
    # [3,]    3   13   18   23
    # [4,]    4   14   19   24
    # [5,]    5   15   20   25
    
    z[,-c(2, 4)]
    #      [,1] [,2] [,3]
    # [1,]    1   11   21
    # [2,]    2   12   22
    # [3,]    3   13   23
    # [4,]    4   14   24
    # [5,]    5   15   25
    ```
    
- 인덱스 벡터로 행과 열 재배치 하기
    
    ```r
    z[5:1, ]
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    5   10   15   20   25
    # [2,]    4    9   14   19   24
    # [3,]    3    8   13   18   23
    # [4,]    2    7   12   17   22
    # [5,]    1    6   11   16   21
    
    z[ , c(3:5, 1:2)]
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]   11   16   21    1    6
    # [2,]   12   17   22    2    7
    # [3,]   13   18   23    3    8
    # [4,]   14   19   24    4    9
    # [5,]   15   20   25    5   10
    
    a <- matrix(sample(1:16), nrow=4, ncol=4)
    #      [,1] [,2] [,3] [,4]
    # [1,]    5    8    2   12
    # [2,]   15    1    3    4
    # [3,]    6   11   10   13
    # [4,]   14    9    7   16
    
    order(a[,1])
    # 1 3 4 2
    
    a[order(a[,1]), ]
    #      [,1] [,2] [,3] [,4]
    # [1,]    5    8    2   12
    # [2,]    6   11   10   13
    # [3,]   14    9    7   16
    # [4,]   15    1    3    4
    ```
    
- 논리 인덱스 벡터
    
    ```r
    height <- c(180, 172, 167, 175, 182)
    weight <- c(72, 78, 58, 64, 68)
    year <- c(1, 3, 2, 4, 2)
    A <- cbind(height, weight, year)
    A[, c(F, T, T)]
    #      weight year
    # [1,]     72    1
    # [2,]     78    3
    # [3,]     58    2
    # [4,]     64    4
    # [5,]     68    2
    
    A[, c(T, F, T)]
    #      height year
    # [1,]    180    1
    # [2,]    172    3
    # [3,]    167    2
    # [4,]    175    4
    # [5,]    182    2
    
    A[ A[,2] < 70, ]
    #      height weight year
    # [1,]    167     58    2
    # [2,]    175     64    4
    # [3,]    182     68    2
    ```
    
- 행과 열 이름 부여하기 : `rownames(), colnames()`
    
    ```r
    colnames(A)
    # "height" "weight" "year"
    
    rownames(A)
    # NULL
    
    rownames(A) <- paste("student", 1:5, sep="")
    #          height weight year
    # student1    180     72    1
    # student2    172     78    3
    # student3    167     58    2
    # student4    175     64    4
    # student5    182     68    2
    
    A[, "year"]
    # student1 student2 student3 student4 student5 
    #        1        3        2        4        2
    
    A["student2", 2]
    # 78
    ```
    
- 벡터로서 필터링 하기
    
    ```r
    z
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    6   11   16   21
    # [2,]    2    7   12   17   22
    # [3,]    3    8   13   18   23
    # [4,]    4    9   14   19   24
    # [5,]    5   10   15   20   25
    
    z[10]
    # 10
    
    z[z>15]
    # 16 17 18 19 20 21 22 23 24 25
    ```
    

# 4. 행렬의 연산

- 행렬의 요소 단위 연산
    
    ```r
    A <- matrix(1:9, nrow=3, ncol=3)
    #      [,1] [,2] [,3]
    # [1,]    1    4    7
    # [2,]    2    5    8
    # [3,]    3    6    9
    
    B <- matrix(seq(from=10, length=9, by=10), nrow=3, ncol=3)
    #      [,1] [,2] [,3]
    # [1,]   10   40   70
    # [2,]   20   50   80
    # [3,]   30   60   90
    
    A+B
    #      [,1] [,2] [,3]
    # [1,]   11   44   77
    # [2,]   22   55   88
    # [3,]   33   66   99
    
    B-A
    #      [,1] [,2] [,3]
    # [1,]    9   36   63
    # [2,]   18   45   72
    # [3,]   27   54   81
    
    A*B
    #      [,1] [,2] [,3]
    # [1,]   10  160  490
    # [2,]   40  250  640
    # [3,]   90  360  810
    
    B/A
    #      [,1] [,2] [,3]
    # [1,]   10   10   10
    # [2,]   10   10   10
    # [3,]   10   10   10
    ```
    
- 행렬은 재사용되지 않음
    
    ```r
    C <- cbind(A, 10:12)
    #      [,1] [,2] [,3] [,4]
    # [1,]    1    4    7   10
    # [2,]    2    5    8   11
    # [3,]    3    6    9   12
    
    B+C
    # Error in B + C: 배열의 크기가 올바르지 않습니다
    
    C <- rbind(A, 1:3)
    #      [,1] [,2] [,3]
    # [1,]    1    4    7
    # [2,]    2    5    8
    # [3,]    3    6    9
    # [4,]    1    2    3
    
    B*C
    # Error in B * C: 배열의 크기가 올바르지 않습니다
    ```
    
- 벡터와 행렬의 연산 : 벡터는 재사용됨
    
    ```r
    a <- 9:1
    a+A
    #      [,1] [,2] [,3]
    # [1,]   10   10   10
    # [2,]   10   10   10
    # [3,]   10   10   10
    
    a <- c(0, 10, 100)
    a+A
    #      [,1] [,2] [,3]
    # [1,]    1    4    7
    # [2,]   12   15   18
    # [3,]  103  106  109
    
    A*a
    #      [,1] [,2] [,3]
    # [1,]    0    0    0
    # [2,]   20   50   80
    # [3,]  300  600  900
    
    10*A
    #      [,1] [,2] [,3]
    # [1,]   10   40   70
    # [2,]   20   50   80
    # [3,]   30   60   90
    
    b <- 1:10
    b*A
    # Warning in b * A: 두 객체의 길이가 서로 배수관계에 있지 않습니다
    # Error in eval(expr, envir, enclos): dims [product 9]가 객체 [10]의 길이와 일치하지 않습니다
    ```
    

# 5. 행렬과 함수

## 1. 행렬을 인수로 하는 함수들

- `t()` : 전치행렬
    
    ```r
    A <- matrix(1:4, nrow=2, ncol=2)
    #      [,1] [,2]
    # [1,]    1    3
    # [2,]    2    4
    
    t(A)
    #      [,1] [,2]
    # [1,]    1    2
    # [2,]    3    4
    ```
    
- 행렬의 차원 정보를 주는 함수 : `nrow(), ncol(), dim()`
    
    ```r
    nrow(A)
    # 2
    
    ncol(A)
    # 2
    
    dim(A)
    # 2 2
    
    attributes(A)
    # $dim
    # 2 2
    ```
    
- 행과 열에 이름 함수 : `rownames(), colnames()`
    
    ```r
    rownames(A)
    # NULL
    
    colnames(A)
    # NULL
    
    rownames(A) <- c("upper", "lower")
    colnames(A) <- c("left", "right")
    #       left right
    # upper    1     3
    # lower    2     4
    
    attributes(A)
    # $dim
    # [1] 2 2
    # $dimnames
    # $dimnames[[1]]
    # "upper" "lower"
    # $dimnames[[2]]
    # "left"  "right"
    ```
    
- 벡터로 변환 : `as.vector(), c()`
    
    ```r
    X <- rbind(1:5, 5:1)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]    1    2    3    4    5
    # [2,]    5    4    3    2    1
    
    x <- as.vector(X)
    # 1 5 2 4 3 3 4 2 5 1
    
    attributes(x)
    # NULL
    
    y <- c(X)
    # 1 5 2 4 3 3 4 2 5 1
    
    attributes(y)
    # NULL
    ```
    
- 행렬에 벡터 함수 적용하기
    
    ```r
    sum(X)
    # 30
    
    mean(X)
    # 3
    
    sd(X)
    # 1.490712
    
    range(X)
    # 1 5
    ```
    

## 2. 행렬의 행별 또는 열별로 함수를 적용하는 방법

- `apply()`
    
    ```r
    apply(X, MARGIN, FUN, ...)
    ```
    
    ```r
    set.seed(123)
    a <- sample(1:25)
    # 15 19 14 3 10 18 11 5 23 6 9 21 24 20 22 25 17 1 12 13 2 16 7 8 4
    
    A <- matrix(a, nrow=5, ncol=5)
    #      [,1] [,2] [,3] [,4] [,5]
    # [1,]   15   18    9   25    2
    # [2,]   19   11   21   17   16
    # [3,]   14    5   24    1    7
    # [4,]    3   23   20   12    8
    # [5,]   10    6   22   13    4
    
    apply(A, 1, sum)
    # 69 84 51 66 55
    
    apply(A, 2, sum)
    # 61 63 96 68 37
    
    sum(A)
    # 325
    
    colnames(A) <- LETTERS[1:5]
    rownames(A) <- paste("X", 1:5, sep="")
    #     A  B  C  D  E
    # X1 15 18  9 25  2
    # X2 19 11 21 17 16
    # X3 14  5 24  1  7
    # X4  3 23 20 12  8
    # X5 10  6 22 13  4
    
    apply(A, 1, min)
    # X1 X2 X3 X4 X5 
    #  2 11  1  3  4
    
    apply(A, 2, max)
    #  A  B  C  D  E
    # 19 23 24 25 16
    ```
    
- 함수의 결과가 벡터이면 열로서 결합하여 출력
    
    ```r
    apply(A, 2, range)
    #       A  B  C  D  E
    # [1,]  3  5  9  1  2
    # [2,] 19 23 24 25 16
    
    apply(A, 1, range)
    #      X1 X2 X3 X4 X5
    # [1,]  2 11  1  3  4
    # [2,] 25 21 24 23 22
    
    apply(A, 1, summary)
    #           X1   X2   X3   X4 X5
    # Min.     2.0 11.0  1.0  3.0  4
    # 1st Qu.  9.0 16.0  5.0  8.0  6
    # Median  15.0 17.0  7.0 12.0 10
    # Mean    13.8 16.8 10.2 13.2 11
    # 3rd Qu. 18.0 19.0 14.0 20.0 13
    # Max.    25.0 21.0 24.0 23.0 22
    ```
    

# 6. 배열

## 1. 배열의 생성

- 벡터 : 1차원 데이터 구조
- 행렬 : 2차원 데이터 구조
    
    ```r
    x <- 11:20
    # 11 12 13 14 15 16 17 18 19 20
    
    x[1]
    # 11
    
    x[6:7]
    # 16 17
    
    x <- matrix(11:19, nrow=3, ncol=3)
    #      [,1] [,2] [,3]
    # [1,]   11   14   17
    # [2,]   12   15   18
    # [3,]   13   16   19
    
    x[1, 2]
    # 14
    
    x[2:3, 1]
    # 12 13
    ```
    
- `array()`
    
    ```r
    matrix(data, nrow, ncol)
    array(data, dim)
    ```
    
- `dim` 인수
    
    ```r
    x <- array(11:28, dim=c(3, 3, 2))
    # , , 1
    #      [,1] [,2] [,3]
    # [1,]   11   14   17
    # [2,]   12   15   18
    # [3,]   13   16   19
    # , , 2
    #      [,1] [,2] [,3]
    # [1,]   20   23   26
    # [2,]   21   24   27
    # [3,]   22   25   28
    ```
    
- 3차원 배열에서 데이터가 채워지는 순서 : 앞 차원, 열 → 뒤 차원, 열
- k차원 배열은 k개의 인덱스 벡터로 요소의 위치를 지정함
    
    ```r
    x[2, 1, 1]
    # 12
    
    x[2, 1, 2]
    # 21
    
    x[1, 2:3, 2]
    # 23 26
    
    x <- array(11:19, c(3,3))
    #      [,1] [,2] [,3]
    # [1,]   11   14   17
    # [2,]   12   15   18
    # [3,]   13   16   19
    ```
    
- 벡터를 재사용하여 배열 만들기
    
    ```r
    x <- array(1, dim=c(2, 3, 2))
    # , , 1
    #      [,1] [,2] [,3]
    # [1,]    1    1    1
    # [2,]    1    1    1
    # , , 2
    #      [,1] [,2] [,3]
    # [1,]    1    1    1
    # [2,]    1    1    1
    
    x <- array(1:6, dim=c(3, 3, 2))
    # , , 1
    #      [,1] [,2] [,3]
    # [1,]    1    4    1
    # [2,]    2    5    2
    # [3,]    3    6    3
    # , , 2
    #      [,1] [,2] [,3]
    # [1,]    4    1    4
    # [2,]    5    2    5
    # [3,]    6    3    6
    
    x <- array(1:5, dim=c(3, 3, 2))
    # , , 1
    #      [,1] [,2] [,3]
    # [1,]    1    4    2
    # [2,]    2    5    3
    # [3,]    3    1    4
    # , , 2
    #      [,1] [,2] [,3]
    # [1,]    5    3    1
    # [2,]    1    4    2
    # [3,]    2    5    3
    
    x <- array(1:30, dim=c(3, 3, 2))
    # , , 1
    #      [,1] [,2] [,3]
    # [1,]    1    4    7
    # [2,]    2    5    8
    # [3,]    3    6    9
    # , , 2
    #      [,1] [,2] [,3]
    # [1,]   10   13   16
    # [2,]   11   14   17
    # [3,]   12   15   18
    ```
    
- 4차원 배열
    
    ```r
    y <- array(1:30, dim=c(2, 3, 2, 2))
    # , , 1, 1
    #      [,1] [,2] [,3]
    # [1,]    1    3    5
    # [2,]    2    4    6
    # , , 2, 1
    #      [,1] [,2] [,3]
    # [1,]    7    9   11
    # [2,]    8   10   12
    # , , 1, 2
    #      [,1] [,2] [,3]
    # [1,]   13   15   17
    # [2,]   14   16   18
    # , , 2, 2
    #      [,1] [,2] [,3]
    # [1,]   19   21   23
    # [2,]   20   22   24
    ```
    

## 2. 배열도 결국 벡터

- 배열은 `dim` 속성을 가진 벡터
    
    ```r
    typeof(x)
    # "integer"
    
    class(x)
    # "array"
    
    attributes(x)
    # $dim
    # 3 3 2
    ```
    
- 벡터에 `dim` 속성을 부여하여 배열 만들기
    
    ```r
    x <- 1:12
    dim(x)
    # NULL
    
    dim(x) <- c(3, 4)
    #      [,1] [,2] [,3] [,4]
    # [1,]    1    4    7   10
    # [2,]    2    5    8   11
    # [3,]    3    6    9   12
    
    dim(x) <- c(2, 3, 2)
    # , , 1
    #      [,1] [,2] [,3]
    # [1,]    1    3    5
    # [2,]    2    4    6
    # , , 2
    #      [,1] [,2] [,3]
    # [1,]    7    9   11
    # [2,]    8   10   12
    
    dim(x) <- NULL
    # 1 2 3 4 5 6 7 8 9 10 11 12
    ```
    
- `dimnames` 속성과 `dimnames()` 함수
    
    ```r
    dim(x) <- c(2, 3, 2)
    dimnames(x) <- list(c("A", "B"), paste("group", 1:3, sep="-"), c("Male", "Female"))
    # , , Male
    #   group-1 group-2 group-3
    # A       1       3       5
    # B       2       4       6
    # , , Female
    #   group-1 group-2 group-3
    # A       7       9      11
    # B       8      10      12
    
    attributes(x)
    # $dim
    # 2 3 2
    # $dimnames
    # $dimnames[[1]]
    # "A" "B"
    # $dimnames[[2]]
    # "group-1" "group-2" "group-3"
    # $dimnames[[3]]
    # "Male" "Female"
    ```
    

## 3. 배열의 연산과 필터링

- 배열의 요소 단위 연산
    
    ```r
    a <- array(1:8, c(2, 2, 2))
    # , , 1
    #      [,1] [,2]
    # [1,]    1    3
    # [2,]    2    4
    # , , 2
    #      [,1] [,2]
    # [1,]    5    7
    # [2,]    6    8
    
    b <- array(10^(0:7), c(2, 2, 2))
    # , , 1
    #      [,1] [,2]
    #[1,]    1  100
    # [2,]   10 1000
    # , , 2
    #       [,1]  [,2]
    # [1,] 1e+04 1e+06
    # [2,] 1e+05 1e+07
    
    a+b
    # , , 1
    #      [,1] [,2]
    # [1,]    2  103
    # [2,]   12 1004
    # , , 2
    #        [,1]     [,2]
    # [1,]  10005  1000007
    # [2,] 100006 10000008
    
    a*b
    # , , 1
    #      [,1] [,2]
    # [1,]    1  300
    # [2,]   20 4000
    # , , 2
    #       [,1]  [,2]
    # [1,] 5e+04 7e+06
    # [2,] 6e+05 8e+07
    
    d <- array(11:30, c(2, 3, 2))
    # , , 1
    #      [,1] [,2] [,3]
    # [1,]   11   13   15
    # [2,]   12   14   16
    # , , 2
    #      [,1] [,2] [,3]
    # [1,]   17   19   21
    # [2,]   18   20   22
    
    a+d
    # Error in a + d: 배열의 크기가 올바르지 않습니다
    
    2*a
    # , , 1
    #      [,1] [,2]
    # [1,]    2    6
    # [2,]    4    8
    # , , 2
    #      [,1] [,2]
    # [1,]   10   14
    # [2,]   12   16
    
    1:2*a
    # , , 1
    #      [,1] [,2]
    # [1,]    1    3
    # [2,]    4    8
    # , , 2
    #      [,1] [,2]
    # [1,]    5    7
    # [2,]   12   16
    ```
    
- 차원 축소와 `drop` 인수
    
    ```r
    x
    # , , Male
    #   group-1 group-2 group-3
    # A       1       3       5
    # B       2       4       6
    # , , Female
    #   group-1 group-2 group-3
    # A       7       9      11
    # B       8      10      12
    
    x[ , , 2]
    #   group-1 group-2 group-3
    # A       7       9      11
    # B       8      10      12
    
    x[ , 2, 2]
    # A  B 
    # 9 10
    
    x[1, 2:3, 2]
    # group-2 group-3
    #       9      11
    
    x[1, 2:3, 1:2]
    #         Male Female
    # group-2    3      9
    # group-3    5     11
    
    x[1, 2:3, 1:2, drop=F]
    # , , Male
    #   group-2 group-3
    # A       3       5
    # , , Female
    #   group-2 group-3
    # A       9      11
    
    x[ , -2, c(T, F)]
    #   group-1 group-3
    # A       1       5
    # B       2       6
    
    x["A", "group-2", "Female"]
    # 9
    ```
    

# 7. 행렬과 배열의 고급 연산

## 1. 행렬의 곱

- `*` : 행렬의 같은 위치의 요소끼리 곱 수행
- `%*%` : 행렬의 곱 연산 수행
    
    $$
    \begin{pmatrix}a&b\\c&d\\\end{pmatrix}\times\begin{pmatrix}e&f\\g&h\\\end{pmatrix}=\begin{pmatrix}bg+ae&  bh+af\\dg+ce&  dh+cf\\\end{pmatrix}
    $$
    
    ```r
    A <- array(1:4, c(2, 2))
    #      [,1] [,2]
    # [1,]    1    3
    # [2,]    2    4
    
    B <- array(10^(0:3), c(2, 2))
    #      [,1] [,2]
    # [1,]    1  100
    # [2,]   10 1000
    
    A*B
    #      [,1] [,2]
    # [1,]    1  300
    # [2,]   20 4000
    
    B*A
    #      [,1] [,2]
    # [1,]    1  300
    # [2,]   20 4000
    
    A%*%B
    #      [,1] [,2]
    # [1,]   31 3100
    # [2,]   42 4200
    
    B%*%A
    #      [,1] [,2]
    # [1,]  201  403
    # [2,] 2010 4030
    
    x <- c(1, 1)
    x%*%A
    #      [,1] [,2]
    # [1,]    3    7
    
    A%*%x
    #      [,1]
    # [1,]    4
    # [2,]    6
    
    x%*%A%*%x
    #      [,1]
    # [1,]   10
    ```
    

## 2. 행렬의 주대각선 요소와 대각행렬

- `diag()`
    
    ```r
    diag(A)
    # 1 4
    
    diag(1:4)
    #      [,1] [,2] [,3] [,4]
    # [1,]    1    0    0    0
    # [2,]    0    2    0    0
    # [3,]    0    0    3    0
    # [4,]    0    0    0    4
    
    diag(3)
    #      [,1] [,2] [,3]
    # [1,]    1    0    0
    # [2,]    0    1    0
    # [3,]    0    0    1
    
    diag(3, nrow=2)
    #      [,1] [,2]
    # [1,]    3    0
    # [2,]    0    3
    ```
    

## 3. 연립 일차 방정식과 역행렬

$$
Ax=b \rightarrow x=A^{-1}b
$$

```r
A <- matrix(c(2, -2, -3, 4), nrow=2, ncol=2)
#      [,1] [,2]
# [1,]    2   -3
# [2,]   -2    4

b <- c(5, -4)
# 5 -4

x <- solve(A, b)
# 4 1

A%*%x
#      [,1]
# [1,]    5
# [2,]   -4

A.inverse <- solve(A)
#      [,1] [,2]
# [1,]    2  1.5
# [2,]    1  1.0

A%*%A.inverse
#      [,1] [,2]
# [1,]    1    0
# [2,]    0    1

A.inverse%*%b
#      [,1]
# [1,]    4
# [2,]    1
```

## 4. 고유치(Eigenvalues)와 고유벡터(Eigenvectors)

- `eigen()`
    
    ```r
    A
    #      [,1] [,2]
    # [1,]    2   -3
    # [2,]   -2    4
    
    ev <- eigen(A)
    ev$values
    # 5.6457513 0.3542487
    
    ev$vectors
    #            [,1]       [,2]
    # [1,]  0.6354064 -0.8767397
    # [2,] -0.7721779 -0.4809652
    
    eigen(A, only.values=TRUE)
    # $values
    # 5.6457513 0.3542487
    # $vectors
    # NULL
    ```
